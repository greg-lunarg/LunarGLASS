
Top IR:
; ModuleID = 'Glslang'

%gl_PerVertex = type { <4 x float>, float, [3 x float] }
%gl_PerVertex.0 = type { <4 x float>, float, [2 x float] }

@gl_in = global [32 x %gl_PerVertex] zeroinitializer
@gl_PatchVerticesIn = global i32 0
@gl_PrimitiveID = global i32 0
@gl_InvocationID = global i32 0
@gl_out = global [4 x %gl_PerVertex.0] zeroinitializer
@gl_TessLevelOuter = global [4 x float] zeroinitializer
@gl_TessLevelInner = global [2 x float] zeroinitializer
@outa = internal global [4 x i32] zeroinitializer
@patchOut = global <4 x float> zeroinitializer
@inb = global [32 x <2 x float>] zeroinitializer
@ind = global [32 x <2 x float>] zeroinitializer
@ivla = global [32 x <4 x float>] zeroinitializer
@ivlb = global [32 x <4 x float>] zeroinitializer
@ovla = global [4 x <4 x float>] zeroinitializer
@ovlb = global [4 x <4 x float>] zeroinitializer

define fastcc void @main() {
entry:
  %iid = alloca i32
  %pid = alloca i32
  %pvi = alloca i32
  %cd = alloca float
  %ps = alloca float
  %p = alloca <4 x float>
  %a = alloca i32
  br label %mainBody

mainBody:                                         ; preds = %entry
  call void @llvm.gla.barrier()
  store i32 5392, i32* %a
  %p1 = load <4 x float>* getelementptr inbounds ([32 x %gl_PerVertex]* @gl_in, i32 0, i32 1, i32 0)
  store <4 x float> %p1, <4 x float>* %p
  %ps2 = load float* getelementptr inbounds ([32 x %gl_PerVertex]* @gl_in, i32 0, i32 1, i32 1)
  store float %ps2, float* %ps
  %cd3 = load float* getelementptr inbounds ([32 x %gl_PerVertex]* @gl_in, i32 0, i32 1, i32 2, i32 2)
  store float %cd3, float* %cd
  %pvi4 = load i32* @gl_PatchVerticesIn
  store i32 %pvi4, i32* %pvi
  %pid5 = load i32* @gl_PrimitiveID
  store i32 %pid5, i32* %pid
  %iid6 = load i32* @gl_InvocationID
  store i32 %iid6, i32* %iid
  %0 = load i32* @gl_InvocationID
  %1 = load <4 x float>* %p
  %2 = getelementptr [4 x %gl_PerVertex.0]* @gl_out, i32 0, i32 %0, i32 0
  store <4 x float> %1, <4 x float>* %2
  %3 = load i32* @gl_InvocationID
  %4 = load float* %ps
  %5 = getelementptr [4 x %gl_PerVertex.0]* @gl_out, i32 0, i32 %3, i32 1
  store float %4, float* %5
  %6 = load i32* @gl_InvocationID
  %7 = load float* %cd
  %8 = getelementptr [4 x %gl_PerVertex.0]* @gl_out, i32 0, i32 %6, i32 2, i32 1
  store float %7, float* %8
  store float 0x40099999A0000000, float* getelementptr inbounds ([4 x float]* @gl_TessLevelOuter, i32 0, i32 3)
  store float 0x3FF4CCCCC0000000, float* getelementptr inbounds ([2 x float]* @gl_TessLevelInner, i32 0, i32 1)
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %mainBody
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

; Function Attrs: nounwind
declare void @llvm.gla.barrier() #0

attributes #0 = { nounwind }

!gla.numVertices = !{!0}
!gla.entrypoint = !{!1}
!gla.inputs = !{!2, !12, !14, !16, !18, !20, !22, !24}
!gla.outputs = !{!26, !28, !30, !32, !34, !35}
!gla.noStaticUse = !{!32, !18, !20, !22, !24, !34, !35}

!0 = !{i32 4}
!1 = !{!"main", i32 15}
!2 = !{!"gl_in", i32 17, [32 x %gl_PerVertex]* @gl_in_typeProxy, !3, !4}
!3 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!4 = !{!"gl_PerVertex", !5, !"gl_Position", !6, !"gl_PointSize", !8, !"gl_ClipDistance", !10}
!5 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!6 = !{!"", !7}
!7 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 9, i32 -1, i32 0, i32 -1}
!8 = !{!"", !9}
!9 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 10, i32 -1, i32 0, i32 -1}
!10 = !{!"", !11}
!11 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 12, i32 -1, i32 0, i32 -1}
!12 = !{!"gl_PatchVerticesIn", i32 1, i32* @gl_PatchVerticesIn_typeProxy, !13}
!13 = !{i32 0, i32 0, i32 1184, null, i32 0, i32 34, i32 -1, i32 0, i32 -1}
!14 = !{!"gl_PrimitiveID", i32 1, i32* @gl_PrimitiveID_typeProxy, !15}
!15 = !{i32 0, i32 0, i32 1185, null, i32 0, i32 31, i32 -1, i32 0, i32 -1}
!16 = !{!"gl_InvocationID", i32 1, i32* @gl_InvocationID_typeProxy, !17}
!17 = !{i32 0, i32 0, i32 1186, null, i32 0, i32 30, i32 -1, i32 0, i32 -1}
!18 = !{!"inb", i32 1, [32 x <2 x float>]* @inb_typeProxy, !19}
!19 = !{i32 0, i32 0, i32 1210, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!20 = !{!"ind", i32 1, [32 x <2 x float>]* @ind_typeProxy, !21}
!21 = !{i32 0, i32 0, i32 1242, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!22 = !{!"ivla", i32 1, [32 x <4 x float>]* @ivla_typeProxy, !23}
!23 = !{i32 0, i32 0, i32 3, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!24 = !{!"ivlb", i32 1, [32 x <4 x float>]* @ivlb_typeProxy, !25}
!25 = !{i32 0, i32 0, i32 4, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!26 = !{!"gl_out", i32 16, [4 x %gl_PerVertex.0]* @gl_out_typeProxy, !27, !4}
!27 = !{i32 0, i32 0, i32 1187, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!28 = !{!"gl_TessLevelOuter", i32 7, [4 x float]* @gl_TessLevelOuter_typeProxy, !29}
!29 = !{i32 0, i32 0, i32 1203, null, i32 3, i32 35, i32 -1, i32 0, i32 -1}
!30 = !{!"gl_TessLevelInner", i32 7, [2 x float]* @gl_TessLevelInner_typeProxy, !31}
!31 = !{i32 0, i32 0, i32 1207, null, i32 3, i32 36, i32 -1, i32 0, i32 -1}
!32 = !{!"patchOut", i32 7, <4 x float>* @patchOut_typeProxy, !33}
!33 = !{i32 0, i32 0, i32 1209, null, i32 3, i32 0, i32 -1, i32 0, i32 -1}
!34 = !{!"ovla", i32 7, [4 x <4 x float>]* @ovla_typeProxy, !23}
!35 = !{!"ovlb", i32 7, [4 x <4 x float>]* @ovlb_typeProxy, !25}


Bottom IR:
; ModuleID = 'Glslang'
target datalayout = "e-p:32:32"

%gl_PerVertex = type { <4 x float>, float, [3 x float] }
%gl_PerVertex.0 = type { <4 x float>, float, [2 x float] }

@gl_in = global [32 x %gl_PerVertex] zeroinitializer
@gl_PatchVerticesIn = global i32 0
@gl_PrimitiveID = global i32 0
@gl_InvocationID = global i32 0
@gl_out = global [4 x %gl_PerVertex.0] zeroinitializer
@gl_TessLevelOuter = global [4 x float] zeroinitializer
@gl_TessLevelInner = global [2 x float] zeroinitializer
@patchOut = global <4 x float> zeroinitializer
@inb = global [32 x <2 x float>] zeroinitializer
@ind = global [32 x <2 x float>] zeroinitializer
@ivla = global [32 x <4 x float>] zeroinitializer
@ivlb = global [32 x <4 x float>] zeroinitializer
@ovla = global [4 x <4 x float>] zeroinitializer
@ovlb = global [4 x <4 x float>] zeroinitializer

define fastcc void @main() {
entry:
  call void @llvm.gla.barrier()
  %gla_constGEP = getelementptr [32 x %gl_PerVertex]* @gl_in, i32 0, i32 1, i32 0
  %p1 = load <4 x float>* %gla_constGEP
  %gla_constGEP7 = getelementptr [32 x %gl_PerVertex]* @gl_in, i32 0, i32 1, i32 1
  %ps2 = load float* %gla_constGEP7
  %gla_constGEP8 = getelementptr [32 x %gl_PerVertex]* @gl_in, i32 0, i32 1, i32 2, i32 2
  %cd3 = load float* %gla_constGEP8
  %0 = load i32* @gl_InvocationID
  %1 = getelementptr [4 x %gl_PerVertex.0]* @gl_out, i32 0, i32 %0, i32 0
  store <4 x float> %p1, <4 x float>* %1
  %2 = getelementptr [4 x %gl_PerVertex.0]* @gl_out, i32 0, i32 %0, i32 1
  store float %ps2, float* %2
  %3 = getelementptr [4 x %gl_PerVertex.0]* @gl_out, i32 0, i32 %0, i32 2, i32 1
  store float %cd3, float* %3
  %gla_constGEP9 = getelementptr [4 x float]* @gl_TessLevelOuter, i32 0, i32 3
  store float 0x40099999A0000000, float* %gla_constGEP9
  %gla_constGEP10 = getelementptr [2 x float]* @gl_TessLevelInner, i32 0, i32 1
  store float 0x3FF4CCCCC0000000, float* %gla_constGEP10
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %entry
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

; Function Attrs: nounwind
declare void @llvm.gla.barrier() #0

attributes #0 = { nounwind }

!gla.numVertices = !{!0}
!gla.entrypoint = !{!1}
!gla.inputs = !{!2, !12, !14, !16, !18, !20, !22, !24}
!gla.outputs = !{!26, !28, !30, !32, !34, !35}
!gla.noStaticUse = !{!32, !18, !20, !22, !24, !34, !35}

!0 = !{i32 4}
!1 = !{!"main", i32 15}
!2 = !{!"gl_in", i32 17, [32 x %gl_PerVertex]* @gl_in_typeProxy, !3, !4}
!3 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!4 = !{!"gl_PerVertex", !5, !"gl_Position", !6, !"gl_PointSize", !8, !"gl_ClipDistance", !10}
!5 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!6 = !{!"", !7}
!7 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 9, i32 -1, i32 0, i32 -1}
!8 = !{!"", !9}
!9 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 10, i32 -1, i32 0, i32 -1}
!10 = !{!"", !11}
!11 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 12, i32 -1, i32 0, i32 -1}
!12 = !{!"gl_PatchVerticesIn", i32 1, i32* @gl_PatchVerticesIn_typeProxy, !13}
!13 = !{i32 0, i32 0, i32 1184, null, i32 0, i32 34, i32 -1, i32 0, i32 -1}
!14 = !{!"gl_PrimitiveID", i32 1, i32* @gl_PrimitiveID_typeProxy, !15}
!15 = !{i32 0, i32 0, i32 1185, null, i32 0, i32 31, i32 -1, i32 0, i32 -1}
!16 = !{!"gl_InvocationID", i32 1, i32* @gl_InvocationID_typeProxy, !17}
!17 = !{i32 0, i32 0, i32 1186, null, i32 0, i32 30, i32 -1, i32 0, i32 -1}
!18 = !{!"inb", i32 1, [32 x <2 x float>]* @inb_typeProxy, !19}
!19 = !{i32 0, i32 0, i32 1210, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!20 = !{!"ind", i32 1, [32 x <2 x float>]* @ind_typeProxy, !21}
!21 = !{i32 0, i32 0, i32 1242, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!22 = !{!"ivla", i32 1, [32 x <4 x float>]* @ivla_typeProxy, !23}
!23 = !{i32 0, i32 0, i32 3, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!24 = !{!"ivlb", i32 1, [32 x <4 x float>]* @ivlb_typeProxy, !25}
!25 = !{i32 0, i32 0, i32 4, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!26 = !{!"gl_out", i32 16, [4 x %gl_PerVertex.0]* @gl_out_typeProxy, !27, !4}
!27 = !{i32 0, i32 0, i32 1187, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!28 = !{!"gl_TessLevelOuter", i32 7, [4 x float]* @gl_TessLevelOuter_typeProxy, !29}
!29 = !{i32 0, i32 0, i32 1203, null, i32 3, i32 35, i32 -1, i32 0, i32 -1}
!30 = !{!"gl_TessLevelInner", i32 7, [2 x float]* @gl_TessLevelInner_typeProxy, !31}
!31 = !{i32 0, i32 0, i32 1207, null, i32 3, i32 36, i32 -1, i32 0, i32 -1}
!32 = !{!"patchOut", i32 7, <4 x float>* @patchOut_typeProxy, !33}
!33 = !{i32 0, i32 0, i32 1209, null, i32 3, i32 0, i32 -1, i32 0, i32 -1}
!34 = !{!"ovla", i32 7, [4 x <4 x float>]* @ovla_typeProxy, !23}
!35 = !{!"ovlb", i32 7, [4 x <4 x float>]* @ovlb_typeProxy, !25}
#version 400 core
// LunarGOO output
#extension GL_ARB_separate_shader_objects : enable
layout(vertices = 4) out;
in gl_PerVertex {
	vec4 gl_Position;
	float gl_PointSize;
	float gl_ClipDistance[3];
} gl_in[32];
in vec2 inb[32];
in vec2 ind[32];
layout(location=3) in vec4 ivla[32];
layout(location=4) in vec4 ivlb[32];
out gl_PerVertex {
	vec4 gl_Position;
	float gl_PointSize;
	float gl_ClipDistance[2];
} gl_out[4];
patch out vec4 patchOut;
layout(location=3) out vec4 ovla[4];
layout(location=4) out vec4 ovlb[4];
const float C_3d2 = 3.2;
const float C_1d3 = 1.3;

void main()
{
	barrier();
	gl_out[gl_InvocationID].gl_Position = gl_in[1].gl_Position;
	gl_out[gl_InvocationID].gl_PointSize = gl_in[1].gl_PointSize;
	gl_out[gl_InvocationID].gl_ClipDistance[1] = gl_in[1].gl_ClipDistance[2];
	gl_TessLevelOuter[3] = C_3d2;
	gl_TessLevelInner[1] = C_1d3;
	
}

